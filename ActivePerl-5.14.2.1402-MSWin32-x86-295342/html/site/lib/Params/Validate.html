<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../../displayToc.js"></script>
<script language="JavaScript" src="../../../tocParas.js"></script>
<script language="JavaScript" src="../../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../../scineplex.css">
<title>Params::Validate - Validate method/function parameters</title>
<link rel="stylesheet" href="../../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>


<!-- INDEX BEGIN -->
<div name="index">
<script>writelinks('__top__',3);</script>
<h1><a>Params::Validate - Validate method/function parameters</a></h1>
<p><a name="__index__"></a></p>


<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#version">VERSION</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<ul>

		<li><a href="#export">EXPORT</a></li>
	</ul>

	<li><a href="#parameter_validation">PARAMETER VALIDATION</a></li>
	<ul>

		<li><a href="#mandatory_optional_parameters">Mandatory/Optional Parameters</a></li>
		<li><a href="#type_validation">Type Validation</a></li>
		<li><a href="#interface_validation">Interface Validation</a></li>
		<li><a href="#class_validation">Class Validation</a></li>
		<li><a href="#regex_validation">Regex Validation</a></li>
		<li><a href="#callback_validation">Callback Validation</a></li>
		<li><a href="#untainting">Untainting</a></li>
		<li><a href="#mandatory_optional_revisited">Mandatory/Optional Revisited</a></li>
		<li><a href="#dependencies">Dependencies</a></li>
		<li><a href="#specifying_defaults">Specifying defaults</a></li>
	</ul>

	<li><a href="#usage_notes">USAGE NOTES</a></li>
	<ul>

		<li><a href="#validation_failure">Validation failure</a></li>
		<li><a href="#method_calls">Method calls</a></li>
		<li><a href="#speeding_up_validation">Speeding Up Validation</a></li>
	</ul>

	<li><a href="#global_options">&quot;GLOBAL&quot; OPTIONS</a></li>
	<ul>

		<li><a href="#options">Options</a></li>
	</ul>

	<li><a href="#per_invocation_options">PER-INVOCATION OPTIONS</a></li>
	<li><a href="#disabling_validation">DISABLING VALIDATION</a></li>
	<li><a href="#limitations">LIMITATIONS</a></li>
	<li><a href="#support">SUPPORT</a></li>
	<li><a href="#donations">DONATIONS</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#copyright_and_license">COPYRIGHT AND LICENSE</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<hr />
<h1><a name="name">NAME</a></h1>
<p>Params::Validate - Validate method/function parameters</p>
<p>
</p>
<hr />
<h1><a name="version">VERSION</a></h1>
<p>version 1.06</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
    <span class="keyword">use</span> <span class="variable">Params::Validate</span> <span class="string">qw(:all)</span><span class="operator">;</span>
</pre>
<pre>
    <span class="comment"># takes named params (hash or hashref)</span>
    <span class="keyword">sub</span><span class="variable"> foo </span><span class="operator">{</span>
        <span class="variable">validate</span><span class="operator">(</span>
            <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
                <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span>    <span class="comment"># mandatory</span>
                <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="number">0</span><span class="operator">,</span>    <span class="comment"># optional</span>
            <span class="operator">}</span>
        <span class="operator">);</span>
    <span class="operator">}</span>
</pre>
<pre>
    <span class="comment"># takes positional params</span>
    <span class="keyword">sub</span><span class="variable"> bar </span><span class="operator">{</span>
        <span class="comment"># first two are mandatory, third is optional</span>
        <span class="variable">validate_pos</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">0</span> <span class="operator">);</span>
    <span class="operator">}</span>
</pre>
<pre>
    <span class="keyword">sub</span><span class="variable"> foo2 </span><span class="operator">{</span>
        <span class="variable">validate</span><span class="operator">(</span>
            <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
                <span class="string">foo</span> <span class="operator">=&gt;</span>
                    <span class="comment"># specify a type</span>
                    <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">ARRAYREF</span> <span class="operator">}</span><span class="operator">,</span>
                <span class="string">bar</span> <span class="operator">=&gt;</span>
                    <span class="comment"># specify an interface</span>
                    <span class="operator">{</span> <span class="string">can</span> <span class="operator">=&gt;</span> <span class="operator">[</span> <span class="string">'print'</span><span class="operator">,</span> <span class="string">'flush'</span><span class="operator">,</span> <span class="string">'frobnicate'</span> <span class="operator">]</span> <span class="operator">}</span><span class="operator">,</span>
                <span class="string">baz</span> <span class="operator">=&gt;</span> <span class="operator">{</span>
                    <span class="string">type</span>      <span class="operator">=&gt;</span> <span class="variable">SCALAR</span><span class="operator">,</span>     <span class="comment"># a scalar ...</span>
                                             <span class="comment"># ... that is a plain integer ...</span>
                    <span class="string">regex</span>     <span class="operator">=&gt;</span> <span class="string">qr/^\d+$/</span><span class="operator">,</span>
                    <span class="string">callbacks</span> <span class="operator">=&gt;</span> <span class="operator">{</span>           <span class="comment"># ... and smaller than 90</span>
                        <span class="string">'less than 90'</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="keyword">shift</span><span class="operator">()</span> <span class="operator">&lt;</span> <span class="number">90</span> <span class="operator">},</span>
                    <span class="operator">}</span><span class="operator">,</span>
                <span class="operator">}</span>
            <span class="operator">}</span>
        <span class="operator">);</span>
    <span class="operator">}</span>
</pre>
<pre>
    <span class="keyword">sub</span><span class="variable"> with_defaults </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">%p</span> <span class="operator">=</span> <span class="variable">validate</span><span class="operator">(</span>
            <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
                <span class="comment"># required</span>
                <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span>
                <span class="comment"># $p{bar} will be 99 if bar is not given.  bar is now</span>
                <span class="comment"># optional.</span>
                <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">default</span> <span class="operator">=&gt;</span> <span class="number">99</span> <span class="operator">}</span>
            <span class="operator">}</span>
        <span class="operator">);</span>
    <span class="operator">}</span>
</pre>
<pre>
    <span class="keyword">sub</span><span class="variable"> pos_with_defaults </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">@p</span> <span class="operator">=</span> <span class="variable">validate_pos</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="operator">{</span> <span class="string">default</span> <span class="operator">=&gt;</span> <span class="number">99</span> <span class="operator">}</span> <span class="operator">);</span>
    <span class="operator">}</span>
</pre>
<pre>
    <span class="keyword">sub</span><span class="variable"> sets_options_on_call </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">%p</span> <span class="operator">=</span> <span class="variable">validate_with</span><span class="operator">(</span>
            <span class="string">params</span> <span class="operator">=&gt;</span> <span class="operator">\</span><span class="variable">@_</span><span class="operator">,</span>
            <span class="string">spec</span>   <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">SCALAR</span><span class="operator">,</span> <span class="string">default</span> <span class="operator">=&gt;</span> <span class="number">2</span> <span class="operator">}</span> <span class="operator">}</span><span class="operator">,</span>
            <span class="string">normalize_keys</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="variable">$_</span><span class="operator">[</span><span class="number">0</span><span class="operator">]</span> <span class="operator">=~</span> <span class="regex">s/^-//</span><span class="operator">;</span> <span class="keyword">lc</span> <span class="variable">$_</span><span class="operator">[</span><span class="number">0</span><span class="operator">]</span> <span class="operator">},</span>
        <span class="operator">);</span>
    <span class="operator">}</span>
</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>The Params::Validate module allows you to validate method or function
call parameters to an arbitrary level of specificity.  At the simplest
level, it is capable of validating the required parameters were given
and that no unspecified additional parameters were passed in.</p>
<p>It is also capable of determining that a parameter is of a specific
type, that it is an object of a certain class hierarchy, that it
possesses certain methods, or applying validation callbacks to
arguments.</p>
<p>
</p>
<h2><a name="export">EXPORT</a></h2>
<p>The module always exports the <code>validate()</code> and <code>validate_pos()</code>
functions.</p>
<p>It also has an additional function available for export,
<code>validate_with</code>, which can be used to validate any type of
parameters, and set various options on a per-invocation basis.</p>
<p>In addition, it can export the following constants, which are used as
part of the type checking.  These are <a href="#scalar"><code>SCALAR</code></a>, <a href="#arrayref"><code>ARRAYREF</code></a>,
<a href="#hashref"><code>HASHREF</code></a>, <a href="#coderef"><code>CODEREF</code></a>, <a href="#glob"><code>GLOB</code></a>, <a href="#globref"><code>GLOBREF</code></a>, and <a href="#scalarref"><code>SCALARREF</code></a>,
<a href="#undef"><code>UNDEF</code></a>, <a href="#object"><code>OBJECT</code></a>, <a href="#boolean"><code>BOOLEAN</code></a>, and <a href="#handle"><code>HANDLE</code></a>.  These are explained
in the section on <a href="../../../Params/Validate.html#type_validation">Type Validation</a>.</p>
<p>The constants are available via the export tag <code>:types</code>.  There is
also an <code>:all</code> tag which includes all of the constants as well as the
<code>validation_options()</code> function.</p>
<p>
</p>
<hr />
<h1><a name="parameter_validation">PARAMETER VALIDATION</a></h1>
<p>The validation mechanisms provided by this module can handle both
named or positional parameters.  For the most part, the same features
are available for each.  The biggest difference is the way that the
validation specification is given to the relevant subroutine.  The
other difference is in the error messages produced when validation
checks fail.</p>
<p>When handling named parameters, the module will accept either a hash
or a hash reference.</p>
<p>Subroutines expecting named parameters should call the <code>validate()</code>
subroutine like this:</p>
<pre>
    <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
            <span class="string">parameter1</span> <span class="operator">=&gt;</span> <span class="variable">validation</span> <span class="variable">spec</span><span class="operator">,</span>
            <span class="string">parameter2</span> <span class="operator">=&gt;</span> <span class="variable">validation</span> <span class="variable">spec</span><span class="operator">,</span>
            <span class="operator">...</span>
        <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<p>Subroutines expecting positional parameters should call the
<code>validate_pos()</code> subroutine like this:</p>
<pre>
    <span class="variable">validate_pos</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span> <span class="variable">validation</span> <span class="variable">spec</span> <span class="operator">}</span><span class="operator">,</span> <span class="operator">{</span> <span class="variable">validation</span> <span class="variable">spec</span> <span class="operator">}</span> <span class="operator">);</span>
</pre>
<p>
</p>
<h2><a name="mandatory_optional_parameters">Mandatory/Optional Parameters</a></h2>
<p>If you just want to specify that some parameters are mandatory and
others are optional, this can be done very simply.</p>
<p>For a subroutine expecting named parameters, you would do this:</p>
<pre>
    <span class="variable">validate</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span> <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span> <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span> <span class="string">baz</span> <span class="operator">=&gt;</span> <span class="number">0</span> <span class="operator">}</span> <span class="operator">);</span>
</pre>
<p>This says that the &quot;foo&quot; and &quot;bar&quot; parameters are mandatory and that
the &quot;baz&quot; parameter is optional.  The presence of any other
parameters will cause an error.</p>
<p>For a subroutine expecting positional parameters, you would do this:</p>
<pre>
    <span class="variable">validate_pos</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span> <span class="operator">);</span>
</pre>
<p>This says that you expect at least 2 and no more than 4 parameters.
If you have a subroutine that has a minimum number of parameters but
can take any maximum number, you can do this:</p>
<pre>
    <span class="variable">validate_pos</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="operator">(</span><span class="number">0</span><span class="operator">)</span> <span class="operator">x</span> <span class="operator">(</span><span class="variable">@_</span> <span class="operator">-</span> <span class="number">2</span><span class="operator">)</span> <span class="operator">);</span>
</pre>
<p>This will always be valid as long as at least two parameters are
given.  A similar construct could be used for the more complex
validation parameters described further on.</p>
<p>Please note that this:</p>
<pre>
    <span class="variable">validate_pos</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span> <span class="operator">);</span>
</pre>
<p>makes absolutely no sense, so don't do it.  Any zeros must come at the
end of the validation specification.</p>
<p>In addition, if you specify that a parameter can have a default, then
it is considered optional.</p>
<p>
</p>
<h2><a name="type_validation">Type Validation</a></h2>
<p>This module supports the following simple types, which can be
<a href="#export">exported as constants</a>:</p>
<ul>
<li><strong><a name="scalar" class="item">SCALAR</a></strong>

<p>A scalar which is not a reference, such as <code>10</code> or <code>'hello'</code>.  A
parameter that is undefined is <strong>not</strong> treated as a scalar.  If you
want to allow undefined values, you will have to specify <code>SCALAR |
UNDEF</code>.</p>
</li>
<li><strong><a name="arrayref" class="item">ARRAYREF</a></strong>

<p>An array reference such as <code>[1, 2, 3]</code> or <code>\@foo</code>.</p>
</li>
<li><strong><a name="hashref" class="item">HASHREF</a></strong>

<p>A hash reference such as <code>{ a =&gt; 1, b =&gt; 2 }</code> or <code>\%bar</code>.</p>
</li>
<li><strong><a name="coderef" class="item">CODEREF</a></strong>

<p>A subroutine reference such as <code>\&amp;foo_sub</code> or <a href="../../../lib/pods/perlfunc.html#sub"><code>sub { print &quot;hello&quot; }</code></a>.</p>
</li>
<li><strong><a name="glob" class="item">GLOB</a></strong>

<p>This one is a bit tricky.  A glob would be something like <code>*FOO</code>, but
not <code>\*FOO</code>, which is a glob reference.  It should be noted that this
trick:</p>
<pre>
    <span class="keyword">my</span> <span class="variable">$fh</span> <span class="operator">=</span> <span class="keyword">do</span> <span class="operator">{</span> <span class="keyword">local</span> <span class="variable">*FH</span><span class="operator">;</span> <span class="operator">};</span>
</pre>
<p>makes <code>$fh</code> a glob, not a glob reference.  On the other hand, the
return value from <code>Symbol::gensym</code> is a glob reference.  Either can
be used as a file or directory handle.</p>
</li>
<li><strong><a name="globref" class="item">GLOBREF</a></strong>

<p>A glob reference such as <code>\*FOO</code>.  See the <a href="#glob">GLOB</a> entry above
for more details.</p>
</li>
<li><strong><a name="scalarref" class="item">SCALARREF</a></strong>

<p>A reference to a scalar such as <a href="../../../lib/pods/perlrun.html#x"><code>\$x</code></a>.</p>
</li>
<li><strong><a name="undef" class="item">UNDEF</a></strong>

<p>An undefined value</p>
</li>
<li><strong><a name="object" class="item">OBJECT</a></strong>

<p>A blessed reference.</p>
</li>
<li><strong><a name="boolean" class="item">BOOLEAN</a></strong>

<p>This is a special option, and is just a shortcut for <code>UNDEF | SCALAR</code>.</p>
</li>
<li><strong><a name="handle" class="item">HANDLE</a></strong>

<p>This option is also special, and is just a shortcut for <code>GLOB |
GLOBREF</code>.  However, it seems likely that most people interested in
either globs or glob references are likely to really be interested in
whether the parameter in question could be a valid file or directory
handle.</p>
</li>
</ul>
<p>To specify that a parameter must be of a given type when using named
parameters, do this:</p>
<pre>
    <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
            <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">SCALAR</span> <span class="operator">}</span><span class="operator">,</span>
            <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">HASHREF</span> <span class="operator">}</span>
        <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<p>If a parameter can be of more than one type, just use the bitwise or
(<code>|</code>) operator to combine them.</p>
<pre>
    <span class="variable">validate</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span> <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">GLOB</span> <span class="operator">|</span> <span class="variable">GLOBREF</span> <span class="operator">}</span> <span class="operator">);</span>
</pre>
<p>For positional parameters, this can be specified as follows:</p>
<pre>
    <span class="variable">validate_pos</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">SCALAR</span> <span class="operator">|</span> <span class="variable">ARRAYREF</span> <span class="operator">}</span><span class="operator">,</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">CODEREF</span> <span class="operator">}</span> <span class="operator">);</span>
</pre>
<p>
</p>
<h2><a name="interface_validation">Interface Validation</a></h2>
<p>To specify that a parameter is expected to have a certain set of
methods, we can do the following:</p>
<pre>
    <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
            <span class="string">foo</span> <span class="operator">=&gt;</span>
                <span class="comment"># just has to be able to -&gt;bar</span>
                <span class="operator">{</span> <span class="string">can</span> <span class="operator">=&gt;</span> <span class="string">'bar'</span> <span class="operator">}</span>
        <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<pre>
 ... or ...</pre>
<pre>
    <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
            <span class="string">foo</span> <span class="operator">=&gt;</span>
                <span class="comment"># must be able to -&gt;bar and -&gt;print</span>
                <span class="operator">{</span> <span class="string">can</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">qw( bar print )</span><span class="operator">]</span> <span class="operator">}</span>
        <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<p>
</p>
<h2><a name="class_validation">Class Validation</a></h2>
<p>A word of warning.  When constructing your external interfaces, it is
probably better to specify what methods you expect an object to
have rather than what class it should be of (or a child of).  This
will make your API much more flexible.</p>
<p>With that said, if you want to validate that an incoming parameter
belongs to a class (or child class) or classes, do:</p>
<pre>
    <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span>
        <span class="operator">{</span> <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">isa</span> <span class="operator">=&gt;</span> <span class="string">'My::Frobnicator'</span> <span class="operator">}</span> <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<pre>
 ... or ...</pre>
<pre>
    <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span>
        <span class="comment"># must be both, not either!</span>
        <span class="operator">{</span> <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">isa</span> <span class="operator">=&gt;</span> <span class="operator">[</span><span class="string">qw( My::Frobnicator IO::Handle )</span><span class="operator">]</span> <span class="operator">}</span> <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<p>
</p>
<h2><a name="regex_validation">Regex Validation</a></h2>
<p>If you want to specify that a given parameter must match a specific
regular expression, this can be done with &quot;regex&quot; spec key.  For
example:</p>
<pre>
    <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span>
        <span class="operator">{</span> <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">regex</span> <span class="operator">=&gt;</span> <span class="string">qr/^\d+$/</span> <span class="operator">}</span> <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<p>The value of the &quot;regex&quot; key may be either a string or a pre-compiled
regex created via <code>qr</code>.</p>
<p>If the value being checked against a regex is undefined, the regex is
explicitly checked against the empty string ('') instead, in order to
avoid &quot;Use of uninitialized value&quot; warnings.</p>
<p>The <code>Regexp::Common</code> module on CPAN is an excellent source of regular
expressions suitable for validating input.</p>
<p>
</p>
<h2><a name="callback_validation">Callback Validation</a></h2>
<p>If none of the above are enough, it is possible to pass in one or more
callbacks to validate the parameter.  The callback will be given the
<strong>value</strong> of the parameter as its first argument.  Its second argument
will be all the parameters, as a reference to either a hash or array.
Callbacks are specified as hash reference.  The key is an id for the
callback (used in error messages) and the value is a subroutine
reference, such as:</p>
<pre>
    <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
            <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span>
                <span class="string">callbacks</span> <span class="operator">=&gt;</span> <span class="operator">{</span>
                    <span class="string">'smaller than a breadbox'</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="keyword">shift</span><span class="operator">()</span> <span class="operator">&lt;</span> <span class="variable">$breadbox</span> <span class="operator">},</span>
                    <span class="string">'green or blue'</span> <span class="operator">=&gt;</span>
                        <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="variable">$_</span><span class="operator">[</span><span class="number">0</span><span class="operator">]</span> <span class="keyword">eq</span> <span class="string">'green'</span> <span class="operator">||</span> <span class="variable">$_</span><span class="operator">[</span><span class="number">0</span><span class="operator">]</span> <span class="keyword">eq</span> <span class="string">'blue'</span> <span class="operator">}</span>
                <span class="operator">}</span>
            <span class="operator">}</span>
        <span class="operator">);</span>
</pre>
<pre>
    <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
            <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span>
                <span class="string">callbacks</span> <span class="operator">=&gt;</span> <span class="operator">{</span>
                    <span class="string">'bigger than baz'</span> <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="variable">$_</span><span class="operator">[</span><span class="number">0</span><span class="operator">]</span> <span class="operator">&gt;</span> <span class="variable">$_</span><span class="operator">[</span><span class="number">1</span><span class="operator">]</span><span class="operator">-&gt;</span><span class="operator">{</span><span class="string">baz</span><span class="operator">}</span> <span class="operator">}</span>
                <span class="operator">}</span>
            <span class="operator">}</span>
        <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<p>
</p>
<h2><a name="untainting">Untainting</a></h2>
<p>If you want values untainted, set the &quot;untaint&quot; key in a spec hashref
to a true value, like this:</p>
<pre>
    <span class="keyword">my</span> <span class="variable">%p</span> <span class="operator">=</span> <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
            <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">SCALAR</span><span class="operator">,</span> <span class="string">untaint</span> <span class="operator">=&gt;</span> <span class="number">1</span> <span class="operator">}</span><span class="operator">,</span>
            <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">ARRAYREF</span> <span class="operator">}</span>
        <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<p>This will untaint the &quot;foo&quot; parameter if the parameters are valid.</p>
<p>Note that untainting is only done if <em>all parameters</em> are valid.
Also, only the return values are untainted, not the original values
passed into the validation function.</p>
<p>Asking for untainting of a reference value will not do anything, as
<code>Params::Validate</code> will only attempt to untaint the reference itself.</p>
<p>
</p>
<h2><a name="mandatory_optional_revisited">Mandatory/Optional Revisited</a></h2>
<p>If you want to specify something such as type or interface, plus the
fact that a parameter can be optional, do this:</p>
<pre>
    <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
            <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">SCALAR</span> <span class="operator">}</span><span class="operator">,</span>
            <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">ARRAYREF</span><span class="operator">,</span> <span class="string">optional</span> <span class="operator">=&gt;</span> <span class="number">1</span> <span class="operator">}</span>
        <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<p>or this for positional parameters:</p>
<pre>
    <span class="variable">validate_pos</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span>
        <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">SCALAR</span> <span class="operator">}</span><span class="operator">,</span>
        <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">ARRAYREF</span><span class="operator">,</span> <span class="string">optional</span> <span class="operator">=&gt;</span> <span class="number">1</span> <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<p>By default, parameters are assumed to be mandatory unless specified as
optional.</p>
<p>
</p>
<h2><a name="dependencies">Dependencies</a></h2>
<p>It also possible to specify that a given optional parameter depends on
the presence of one or more other optional parameters.</p>
<pre>
    <span class="variable">validate</span><span class="operator">(</span>
        <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
            <span class="string">cc_number</span> <span class="operator">=&gt;</span> <span class="operator">{</span>
                <span class="string">type</span>     <span class="operator">=&gt;</span> <span class="variable">SCALAR</span><span class="operator">,</span>
                <span class="string">optional</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span>
                <span class="string">depends</span>  <span class="operator">=&gt;</span> <span class="operator">[</span> <span class="string">'cc_expiration'</span><span class="operator">,</span> <span class="string">'cc_holder_name'</span> <span class="operator">]</span><span class="operator">,</span>
            <span class="operator">}</span><span class="operator">,</span>
            <span class="variable">cc_expiration</span>  <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">SCALAR</span><span class="operator">,</span> <span class="string">optional</span> <span class="operator">=&gt;</span> <span class="number">1</span> <span class="operator">},</span>
            <span class="variable">cc_holder_name</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">SCALAR</span><span class="operator">,</span> <span class="string">optional</span> <span class="operator">=&gt;</span> <span class="number">1</span> <span class="operator">},</span>
        <span class="operator">}</span>
    <span class="operator">);</span>
</pre>
<p>In this case, &quot;cc_number&quot;, &quot;cc_expiration&quot;, and &quot;cc_holder_name&quot; are
all optional.  However, if &quot;cc_number&quot; is provided, then
&quot;cc_expiration&quot; and &quot;cc_holder_name&quot; must be provided as well.</p>
<p>This allows you to group together sets of parameters that all must be
provided together.</p>
<p>The <code>validate_pos()</code> version of dependencies is slightly different,
in that you can only depend on one other parameter.  Also, if for
example, the second parameter 2 depends on the fourth parameter, then
it implies a dependency on the third parameter as well.  This is
because if the fourth parameter is required, then the user must also
provide a third parameter so that there can be four parameters in
total.</p>
<p><code>Params::Validate</code> will die if you try to depend on a parameter not
declared as part of your parameter specification.</p>
<p>
</p>
<h2><a name="specifying_defaults">Specifying defaults</a></h2>
<p>If the <code>validate()</code> or <code>validate_pos()</code> functions are called in a list
context, they will return a hash or containing the original parameters plus
defaults as indicated by the validation spec.</p>
<p>If the function is not called in a list context, providing a default
in the validation spec still indicates that the parameter is optional.</p>
<p>The hash or array returned from the function will always be a copy of
the original parameters, in order to leave <a href="../../../lib/pods/perlvar.html#__"><code>@_</code></a> untouched for the
calling function.</p>
<p>Simple examples of defaults would be:</p>
<pre>
    <span class="keyword">my</span> <span class="variable">%p</span> <span class="operator">=</span> <span class="variable">validate</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span> <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span> <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">default</span> <span class="operator">=&gt;</span> <span class="number">99</span> <span class="operator">}</span> <span class="operator">}</span> <span class="operator">);</span>
</pre>
<pre>
    <span class="keyword">my</span> <span class="variable">@p</span> <span class="operator">=</span> <span class="variable">validate_pos</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="operator">{</span> <span class="string">default</span> <span class="operator">=&gt;</span> <span class="number">99</span> <span class="operator">}</span> <span class="operator">);</span>
</pre>
<p>In scalar context, a hash reference or array reference will be
returned, as appropriate.</p>
<p>
</p>
<hr />
<h1><a name="usage_notes">USAGE NOTES</a></h1>
<p>
</p>
<h2><a name="validation_failure">Validation failure</a></h2>
<p>By default, when validation fails <code>Params::Validate</code> calls
<code>Carp::confess()</code>.  This can be overridden by setting the <code>on_fail</code>
option, which is described in the <a href="#global_options">&quot;GLOBAL&quot; OPTIONS</a>
section.</p>
<p>
</p>
<h2><a name="method_calls">Method calls</a></h2>
<p>When using this module to validate the parameters passed to a method
call, you will probably want to remove the class/object from the
parameter list <strong>before</strong> calling <code>validate()</code> or <code>validate_pos()</code>.
If your method expects named parameters, then this is necessary for
the <code>validate()</code> function to actually work, otherwise <a href="../../../lib/pods/perlvar.html#__"><code>@_</code></a> will not
be usable as a hash, because it will first have your object (or
class) <strong>followed</strong> by a set of keys and values.</p>
<p>Thus the idiomatic usage of <code>validate()</code> in a method call will look
something like this:</p>
<pre>
    <span class="keyword">sub</span><span class="variable"> method </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">$self</span> <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span>
</pre>
<pre>
        <span class="keyword">my</span> <span class="variable">%params</span> <span class="operator">=</span> <span class="variable">validate</span><span class="operator">(</span>
            <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span>
                <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span>
                <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">ARRAYREF</span> <span class="operator">}</span><span class="operator">,</span>
            <span class="operator">}</span>
        <span class="operator">);</span>
            <span class="operator">}</span>
</pre>
<p>
</p>
<h2><a name="speeding_up_validation">Speeding Up Validation</a></h2>
<p>In most cases, the validation spec will remain the same for each call to a
subroutine. In that case, you can speed up validation by defining the
validation spec just once, rather than on each call to the subroutine:</p>
<pre>
    <span class="keyword">my</span> <span class="variable">%spec</span> <span class="operator">=</span> <span class="operator">(</span> <span class="operator">...</span> <span class="operator">);</span>
    <span class="keyword">sub</span><span class="variable"> foo </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">%params</span> <span class="operator">=</span> <span class="variable">validate</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="operator">\</span><span class="variable">%spec</span> <span class="operator">);</span>
    <span class="operator">}</span>
</pre>
<p>You can also use the <a href="../../../lib/pods/perlfunc.html#state"><code>state</code></a> feature to do this:</p>
<pre>
    <span class="keyword">use</span> <span class="variable">feature</span> <span class="string">'state'</span><span class="operator">;</span>
</pre>
<pre>
    <span class="keyword">sub</span><span class="variable"> foo </span><span class="operator">{</span>
        <span class="keyword">state</span> <span class="variable">%spec</span> <span class="operator">=</span> <span class="operator">(</span> <span class="operator">...</span> <span class="operator">);</span>
        <span class="keyword">my</span> <span class="variable">%params</span> <span class="operator">=</span> <span class="variable">validate</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="operator">\</span><span class="variable">%spec</span> <span class="operator">);</span>
    <span class="operator">}</span>
</pre>
<p>
</p>
<hr />
<h1><a name="global_options">&quot;GLOBAL&quot; OPTIONS</a></h1>
<p>Because the API for the <code>validate()</code> and <code>validate_pos()</code> functions does not
make it possible to specify any options other than the validation spec, it is
possible to set some options as pseudo-'globals'.  These allow you to specify
such things as whether or not the validation of named parameters should be
case sensitive, for one example.</p>
<p>These options are called pseudo-'globals' because these settings are
<strong>only applied to calls originating from the package that set the
options</strong>.</p>
<p>In other words, if I am in package <code>Foo</code> and I call
<code>validation_options()</code>, those options are only in effect when I call
<code>validate()</code> from package <code>Foo</code>.</p>
<p>While this is quite different from how most other modules operate, I
feel that this is necessary in able to make it possible for one
module/application to use Params::Validate while still using other
modules that also use Params::Validate, perhaps with different
options set.</p>
<p>The downside to this is that if you are writing an app with a standard
calling style for all functions, and your app has ten modules, <strong>each
module must include a call to <code>validation_options()</code></strong>. You could of
course write a module that all your modules use which uses various
trickery to do this when imported.</p>
<p>
</p>
<h2><a name="options">Options</a></h2>
<ul>
<li><strong><a name="normalize_keys_callback" class="item">normalize_keys =&gt; $callback</a></strong>

<p>This option is only relevant when dealing with named parameters.</p>
<p>This callback will be used to transform the hash keys of both the
parameters and the parameter spec when <code>validate()</code> or
<code>validate_with()</code> are called.</p>
<p>Any alterations made by this callback will be reflected in the
parameter hash that is returned by the validation function.  For
example:</p>
<pre>
    <span class="keyword">sub</span><span class="variable"> foo </span><span class="operator">{</span>
        <span class="keyword">return</span> <span class="variable">validate_with</span><span class="operator">(</span>
            <span class="string">params</span> <span class="operator">=&gt;</span> <span class="operator">\</span><span class="variable">@_</span><span class="operator">,</span>
            <span class="string">spec</span>   <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span> <span class="operator">=&gt;</span> <span class="variable">SCALAR</span> <span class="operator">}</span> <span class="operator">}</span><span class="operator">,</span>
            <span class="string">normalize_keys</span> <span class="operator">=&gt;</span>
                <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="keyword">my</span> <span class="variable">$k</span> <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span> <span class="variable">$k</span> <span class="operator">=~</span> <span class="regex">s/^-//</span><span class="operator">;</span> <span class="keyword">return</span> <span class="keyword">uc</span> <span class="variable">$k</span> <span class="operator">},</span>
        <span class="operator">);</span>
</pre>
<pre>
    }</pre>
<pre>
    <span class="variable">%p</span> <span class="operator">=</span> <span class="variable">foo</span><span class="operator">(</span> <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="number">20</span> <span class="operator">);</span>
</pre>
<pre>
    <span class="comment"># $p{FOO} is now 20</span>
</pre>
<pre>
    <span class="variable">%p</span> <span class="operator">=</span> <span class="variable">foo</span><span class="operator">(</span> <span class="string">-fOo</span> <span class="operator">=&gt;</span> <span class="number">50</span> <span class="operator">);</span>
</pre>
<pre>
    <span class="comment"># $p{FOO} is now 50</span>
</pre>
<p>The callback must return a defined value.</p>
<p>If a callback is given then the deprecated &quot;ignore_case&quot; and
&quot;strip_leading&quot; options are ignored.</p>
</li>
<li><strong><a name="allow_extra_boolean" class="item">allow_extra =&gt; $boolean</a></strong>

<p>If true, then the validation routine will allow extra parameters not
named in the validation specification.  In the case of positional
parameters, this allows an unlimited number of maximum parameters
(though a minimum may still be set).  Defaults to false.</p>
</li>
<li><strong><a name="on_fail_callback" class="item">on_fail =&gt; $callback</a></strong>

<p>If given, this callback will be called whenever a validation check
fails.  It will be called with a single parameter, which will be a
string describing the failure.  This is useful if you wish to have
this module throw exceptions as objects rather than as strings, for
example.</p>
<p>This callback is expected to <a href="../../../lib/pods/perlfunc.html#die"><code>die()</code></a> internally.  If it does not, the
validation will proceed onwards, with unpredictable results.</p>
<p>The default is to simply use the Carp module's <code>confess()</code> function.</p>
</li>
<li><strong><a name="stack_skip_number" class="item">stack_skip =&gt; $number</a></strong>

<p>This tells Params::Validate how many stack frames to skip when finding
a subroutine name to use in error messages.  By default, it looks one
frame back, at the immediate caller to <code>validate()</code> or
<code>validate_pos()</code>.  If this option is set, then the given number of
frames are skipped instead.</p>
</li>
<li><strong><a name="ignore_case_boolean" class="item">ignore_case =&gt; $boolean</a></strong>

<p>DEPRECATED</p>
<p>This is only relevant when dealing with named parameters.  If it is
true, then the validation code will ignore the case of parameter
names.  Defaults to false.</p>
</li>
<li><strong><a name="strip_leading_characters" class="item">strip_leading =&gt; $characters</a></strong>

<p>DEPRECATED</p>
<p>This too is only relevant when dealing with named parameters.  If this
is given then any parameters starting with these characters will be
considered equivalent to parameters without them entirely.  For
example, if this is specified as '-', then <code>-foo</code> and <code>foo</code> would be
considered identical.</p>
</li>
</ul>
<p>
</p>
<hr />
<h1><a name="per_invocation_options">PER-INVOCATION OPTIONS</a></h1>
<p>The <code>validate_with()</code> function can be used to set the options listed
above on a per-invocation basis.  For example:</p>
<pre>
    <span class="keyword">my</span> <span class="variable">%p</span> <span class="operator">=</span> <span class="variable">validate_with</span><span class="operator">(</span>
        <span class="string">params</span> <span class="operator">=&gt;</span> <span class="operator">\</span><span class="variable">@_</span><span class="operator">,</span>
        <span class="string">spec</span>   <span class="operator">=&gt;</span> <span class="operator">{</span>
            <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span>    <span class="operator">=&gt;</span> <span class="variable">SCALAR</span> <span class="operator">}</span><span class="operator">,</span>
            <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">default</span> <span class="operator">=&gt;</span> <span class="number">10</span> <span class="operator">}</span>
        <span class="operator">}</span><span class="operator">,</span>
        <span class="string">allow_extra</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span>
    <span class="operator">);</span>
</pre>
<p>In addition to the options listed above, it is also possible to set
the option &quot;called&quot;, which should be a string.  This string will be
used in any error messages caused by a failure to meet the validation
spec.</p>
<p>This subroutine will validate named parameters as a hash if the &quot;spec&quot;
parameter is a hash reference.  If it is an array reference, the
parameters are assumed to be positional.</p>
<pre>
    <span class="keyword">my</span> <span class="variable">%p</span> <span class="operator">=</span> <span class="variable">validate_with</span><span class="operator">(</span>
        <span class="string">params</span> <span class="operator">=&gt;</span> <span class="operator">\</span><span class="variable">@_</span><span class="operator">,</span>
        <span class="string">spec</span>   <span class="operator">=&gt;</span> <span class="operator">{</span>
            <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">type</span>    <span class="operator">=&gt;</span> <span class="variable">SCALAR</span> <span class="operator">}</span><span class="operator">,</span>
            <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="operator">{</span> <span class="string">default</span> <span class="operator">=&gt;</span> <span class="number">10</span> <span class="operator">}</span>
        <span class="operator">}</span><span class="operator">,</span>
        <span class="string">allow_extra</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span>
        <span class="string">called</span>      <span class="operator">=&gt;</span> <span class="string">'The Quux::Baz class constructor'</span><span class="operator">,</span>
    <span class="operator">);</span>
</pre>
<pre>
    <span class="keyword">my</span> <span class="variable">@p</span> <span class="operator">=</span> <span class="variable">validate_with</span><span class="operator">(</span>
        <span class="string">params</span> <span class="operator">=&gt;</span> <span class="operator">\</span><span class="variable">@_</span><span class="operator">,</span>
        <span class="string">spec</span>   <span class="operator">=&gt;</span> <span class="operator">[</span>
            <span class="operator">{</span> <span class="string">type</span>    <span class="operator">=&gt;</span> <span class="variable">SCALAR</span> <span class="operator">}</span><span class="operator">,</span>
            <span class="operator">{</span> <span class="string">default</span> <span class="operator">=&gt;</span> <span class="number">10</span> <span class="operator">}</span>
        <span class="operator">]</span><span class="operator">,</span>
        <span class="string">allow_extra</span> <span class="operator">=&gt;</span> <span class="number">1</span><span class="operator">,</span>
        <span class="string">called</span>      <span class="operator">=&gt;</span> <span class="string">'The Quux::Baz class constructor'</span><span class="operator">,</span>
    <span class="operator">);</span>
</pre>
<p>
</p>
<hr />
<h1><a name="disabling_validation">DISABLING VALIDATION</a></h1>
<p>If the environment variable <code>PERL_NO_VALIDATION</code> is set to something
true, then validation is turned off.  This may be useful if you only
want to use this module during development but don't want the speed
hit during production.</p>
<p>The only error that will be caught will be when an odd number of
parameters are passed into a function/method that expects a hash.</p>
<p>If you want to selectively turn validation on and off at runtime, you
can directly set the <code>$Params::Validate::NO_VALIDATION</code> global
variable.  It is <strong>strongly</strong> recommended that you <strong>localize</strong> any
changes to this variable, because other modules you are using may
expect validation to be on when they execute.  For example:</p>
<pre>
    <span class="operator">{</span>
        <span class="keyword">local</span> <span class="variable">$Params::Validate::NO_VALIDATION</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span>
</pre>
<pre>
        <span class="comment"># no error</span>
        <span class="variable">foo</span><span class="operator">(</span> <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="number">2</span> <span class="operator">);</span>
            <span class="operator">}</span>
</pre>
<pre>
    <span class="comment"># error</span>
    <span class="variable">foo</span><span class="operator">(</span> <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="number">2</span> <span class="operator">);</span>
</pre>
<pre>
    <span class="keyword">sub</span><span class="variable"> foo </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">%p</span> <span class="operator">=</span> <span class="variable">validate</span><span class="operator">(</span> <span class="variable">@_</span><span class="operator">,</span> <span class="operator">{</span> <span class="string">foo</span> <span class="operator">=&gt;</span> <span class="number">1</span> <span class="operator">}</span> <span class="operator">);</span>
        <span class="operator">...;</span>
    <span class="operator">}</span>
</pre>
<p>But if you want to shoot yourself in the foot and just turn it off, go
ahead!</p>
<p>
</p>
<hr />
<h1><a name="limitations">LIMITATIONS</a></h1>
<p>Right now there is no way (short of a callback) to specify that
something must be of one of a list of classes, or that it must possess
one of a list of methods.  If this is desired, it can be added in the
future.</p>
<p>Ideally, there would be only one validation function.  If someone
figures out how to do this, please let me know.</p>
<p>
</p>
<hr />
<h1><a name="support">SUPPORT</a></h1>
<p>Please submit bugs and patches to the CPAN RT system at
<a href="http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Params%3A%3AValidate">http://rt.cpan.org/NoAuth/ReportBug.html?Queue=Params%3A%3AValidate</a> or
via email at <a href="mailto:bug-params-validate@rt.cpan.org.">bug-params-validate@rt.cpan.org.</a></p>
<p>Support questions can be sent to Dave at <a href="mailto:autarch@urth.org.">autarch@urth.org.</a></p>
<p>
</p>
<hr />
<h1><a name="donations">DONATIONS</a></h1>
<p>If you'd like to thank me for the work I've done on this module,
please consider making a &quot;donation&quot; to me via PayPal. I spend a lot of
free time creating free software, and would appreciate any support
you'd care to offer.</p>
<p>Please note that <strong>I am not suggesting that you must do this</strong> in order
for me to continue working on this particular software. I will
continue to do so, inasmuch as I have in the past, for as long as it
interests me.</p>
<p>Similarly, a donation made in this way will probably not make me work
on this software much more, unless I get so many donations that I can
consider working on free software full time, which seems unlikely at
best.</p>
<p>To donate, log into PayPal and send money to <a href="mailto:autarch@urth.org">autarch@urth.org</a> or use
the button on this page:
<a href="http://www.urth.org/~autarch/fs-donation.html">http://www.urth.org/~autarch/fs-donation.html</a></p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Dave Rolsky, &lt;<a href="mailto:autarch@urth.org">autarch@urth.org</a>&gt; and Ilya Martynov &lt;<a href="mailto:ilya@martynov.org">ilya@martynov.org</a>&gt;</p>
<p>
</p>
<hr />
<h1><a name="copyright_and_license">COPYRIGHT AND LICENSE</a></h1>
<p>This software is Copyright (c) 2012 by Dave Rolsky and Ilya Martynov.</p>
<p>This is free software, licensed under:</p>
<pre>
  The Artistic License 2.0 (GPL Compatible)</pre>

</body>

</html>
